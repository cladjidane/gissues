<!DOCTYPE html>
<html>
<head>
  <title>Gissues - Auto Icon Generator</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      padding: 20px; 
      background: #f0f0f0; 
      text-align: center;
    }
    .status { 
      font-size: 18px; 
      margin: 20px; 
      padding: 15px;
      border-radius: 8px;
    }
    .success { background: #d1fae5; color: #065f46; }
    .info { background: #e0f2fe; color: #0c4a6e; }
    .icons-preview { 
      display: flex; 
      justify-content: center; 
      gap: 20px; 
      margin: 30px 0;
    }
    .icon-item { 
      text-align: center; 
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    canvas { 
      border: 1px solid #ddd; 
      border-radius: 4px;
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
    }
    button:hover { background: #2563eb; }
  </style>
</head>
<body>
  <h1>üêõ Gissues - G√©n√©rateur d'Ic√¥nes Automatique</h1>
  
  <div id="status" class="status info">
    ‚è≥ G√©n√©ration des ic√¥nes en cours...
  </div>
  
  <div class="icons-preview" id="icons-preview"></div>
  
  <button onclick="downloadAllIcons()">üì• T√©l√©charger Toutes les Ic√¥nes</button>
  <button onclick="generateManifestCode()">üìã Copier Code Manifest</button>
  
  <div id="manifest-code" style="display: none; background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px; text-align: left;">
    <h3>‚úÖ √âtapes suivantes :</h3>
    <ol style="margin: 10px 0; padding-left: 20px;">
      <li>D√©placez les fichiers t√©l√©charg√©s dans le dossier <code>/icons/</code></li>
      <li>Copiez le code ci-dessous dans votre <code>manifest.json</code></li>
      <li>Rechargez l'extension dans Chrome</li>
    </ol>
    <h4>Code pour manifest.json :</h4>
    <pre id="manifest-text" style="background: #e9ecef; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px;"></pre>
    <button onclick="copyToClipboard()">üìã Copier le Code</button>
  </div>

  <script>
    const sizes = [16, 32, 48, 128];
    const generatedIcons = {};
    
    function createModernIcon(size) {
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');
      
      // Modern gradient background
      const gradient = ctx.createLinearGradient(0, 0, size, size);
      gradient.addColorStop(0, '#6366F1'); // Indigo
      gradient.addColorStop(1, '#8B5CF6'); // Purple
      
      // Rounded square with fallback
      ctx.fillStyle = gradient;
      if (ctx.roundRect) {
        ctx.beginPath();
        ctx.roundRect(0, 0, size, size, size * 0.2);
        ctx.fill();
      } else {
        // Fallback for older browsers
        const radius = size * 0.2;
        ctx.beginPath();
        ctx.moveTo(radius, 0);
        ctx.lineTo(size - radius, 0);
        ctx.quadraticCurveTo(size, 0, size, radius);
        ctx.lineTo(size, size - radius);
        ctx.quadraticCurveTo(size, size, size - radius, size);
        ctx.lineTo(radius, size);
        ctx.quadraticCurveTo(0, size, 0, size - radius);
        ctx.lineTo(0, radius);
        ctx.quadraticCurveTo(0, 0, radius, 0);
        ctx.fill();
      }
      
      // Bug icon - simplified geometric
      const center = size / 2;
      const bugSize = size * 0.4;
      
      // Bug body (oval)
      ctx.fillStyle = 'white';
      ctx.beginPath();
      ctx.ellipse(center, center, bugSize * 0.3, bugSize * 0.5, 0, 0, Math.PI * 2);
      ctx.fill();
      
      // Bug head
      ctx.beginPath();
      ctx.arc(center, center - bugSize * 0.3, bugSize * 0.2, 0, Math.PI * 2);
      ctx.fill();
      
      // Antennae
      ctx.strokeStyle = 'white';
      ctx.lineWidth = Math.max(1, size * 0.04);
      ctx.beginPath();
      ctx.moveTo(center - bugSize * 0.1, center - bugSize * 0.4);
      ctx.lineTo(center - bugSize * 0.2, center - bugSize * 0.6);
      ctx.moveTo(center + bugSize * 0.1, center - bugSize * 0.4);
      ctx.lineTo(center + bugSize * 0.2, center - bugSize * 0.6);
      ctx.stroke();
      
      return canvas;
    }
    
    function generateIcons() {
      const previewDiv = document.getElementById('icons-preview');
      
      sizes.forEach(size => {
        const canvas = createModernIcon(size);
        generatedIcons[size] = canvas;
        
        const iconItem = document.createElement('div');
        iconItem.className = 'icon-item';
        iconItem.innerHTML = `
          <div style="font-weight: bold; margin-bottom: 8px;">${size}√ó${size}</div>
          ${canvas.outerHTML}
          <br>
          <button onclick="downloadIcon(${size})" style="font-size: 12px; padding: 6px 12px; margin-top: 8px;">
            üì• T√©l√©charger
          </button>
        `;
        previewDiv.appendChild(iconItem);
      });
      
      // Update status
      const statusDiv = document.getElementById('status');
      statusDiv.className = 'status success';
      statusDiv.innerHTML = '‚úÖ Ic√¥nes g√©n√©r√©es avec succ√®s ! Cliquez sur les boutons pour t√©l√©charger.';
    }
    
    function downloadIcon(size) {
      const canvas = generatedIcons[size];
      const link = document.createElement('a');
      link.download = `icon-${size}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }
    
    function downloadAllIcons() {
      sizes.forEach((size, index) => {
        setTimeout(() => downloadIcon(size), index * 300);
      });
    }
    
    function generateManifestCode() {
      const manifestCode = `"icons": {
  "16": "icons/icon-16.png",
  "32": "icons/icon-32.png",
  "48": "icons/icon-48.png",
  "128": "icons/icon-128.png"
},
"action": {
  "default_popup": "src/popup/popup.html",
  "default_title": "Gissues",
  "default_icon": {
    "16": "icons/icon-16.png",
    "32": "icons/icon-32.png",
    "48": "icons/icon-48.png",
    "128": "icons/icon-128.png"
  }
}`;
      
      document.getElementById('manifest-text').textContent = manifestCode;
      document.getElementById('manifest-code').style.display = 'block';
    }
    
    function copyToClipboard() {
      const text = document.getElementById('manifest-text').textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert('‚úÖ Code copi√© dans le presse-papiers !');
      });
    }
    
    // Auto-generate on page load
    setTimeout(() => {
      generateIcons();
      // Auto-download after 2 seconds
      setTimeout(downloadAllIcons, 2000);
    }, 500);
  </script>
</body>
</html>